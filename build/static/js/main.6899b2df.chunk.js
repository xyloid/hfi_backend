(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{136:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(0),c=n(16),s=n.n(c),i=n(26),o=n(22),u=n(12),l=n.n(u),d=n(17),j=n(28),b=n(27),p=n.n(b),h="/api/data",f=null,x={getAll:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:f}},e.next=3,p.a.get(h,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){f="bearer ".concat(e)},fetchById:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,p.a.get(h+"/"+t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O={login:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=n(141),g=n(139),m=function(e){var t=e.handleSubmit,n=Object(r.useState)(""),c=Object(j.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(""),u=Object(j.a)(o,2),l=u[0],d=u[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Login"}),Object(a.jsx)(v.a,{onSubmit:function(e){e.preventDefault(),console.log(s,l),t(s,l),i(""),d("")},style:{width:"200px"},children:Object(a.jsxs)(v.a.Group,{children:[Object(a.jsx)(v.a.Label,{children:"username:"}),Object(a.jsx)(v.a.Control,{type:"text",name:"username",value:s,onChange:function(e){var t=e.target;return i(t.value)}}),Object(a.jsx)(v.a.Label,{children:"password:"}),Object(a.jsx)(v.a.Control,{type:"password",value:l,onChange:function(e){var t=e.target;return d(t.value)}}),Object(a.jsx)(g.a,{variant:"primary",type:"submit",children:"login"})]})})]})},y=n(47),w=n.n(y),k=function(e){return{type:"INIT_RECORDS",data:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BY_ID":console.log("get by id");var n=e.map((function(e){return e.id===t.data.id?t.data:e}));return n.sort((function(e,t){return e.timestamp-t.timestamp}));case"INIT_RECORDS":return t.data;default:return e}},I=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})),n={renderer:function(e){e.statusHistory;return Object(a.jsx)("div",{children:"undefined"===typeof e.statusHistory?Object(a.jsx)("div",{}):Object(a.jsx)("div",{style:{backgroundColor:"#e7e8e1"},children:Object(a.jsx)(w.a,{keyField:"_id",data:e.statusHistory,columns:[{dataField:"statusCode",text:"Status"},{dataField:"timestamp",text:"Time"}]})})})},onExpand:function(t,n,a,r){var c;n&&"undefined"===typeof t.statusHistory&&e((c=t.id,function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.fetchById(c);case 2:return n=e.sent,e.abrupt("return",t({type:"GET_BY_ID",data:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}};return Object(a.jsx)("div",{style:{backgroundColor:"#e6f1f5"},children:Object(a.jsx)(w.a,{keyField:"id",data:t,columns:[{dataField:"id",text:"ID"},{dataField:"name",text:"Name"},{dataField:"gender",text:"Gender"},{dataField:"age",text:"Age"},{dataField:"caseStatus",text:"Case Status"},{dataField:"plan",text:"Plan"}],expandRow:n})})},C=n(140),F=n(142),T=n(36),E=n(10),N=function(){var e=Object(o.b)(),t=Object(r.useState)(null),n=Object(j.a)(t,2),c=n[0],s=n[1];Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedUser");if(t){var n=JSON.parse(t);s(n),x.setToken(n.token),x.getAll().then((function(t){return e(k(t))}))}}),[e]);var i=function(){var t=Object(d.a)(l.a.mark((function t(n,a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.login({username:n,password:a});case 3:r=t.sent,console.log(r),s(r),window.localStorage.setItem("loggedUser",JSON.stringify(r)),x.setToken(r.token),x.getAll().then((function(t){return e(k(t))})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(T.a,{children:[Object(a.jsxs)(C.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(a.jsx)(C.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(a.jsx)(C.a.Collapse,{id:"responsive-navbar-nav",children:Object(a.jsxs)(F.a,{className:"mr-auto",children:[Object(a.jsx)(F.a.Link,{href:"#",as:"span",children:Object(a.jsx)(T.b,{style:{padding:5},to:"/",children:"home"})}),Object(a.jsx)(F.a.Link,{href:"#",as:"span",children:c?Object(a.jsxs)("em",{children:[c.name," logged in",Object(a.jsx)(g.a,{variant:"outline-primary",size:"sm",onClick:function(){window.localStorage.removeItem("loggedUser"),s(null)},children:"logout"})]}):Object(a.jsx)(T.b,{to:"/login",children:"login"})})]})})]}),Object(a.jsxs)(E.c,{children:[Object(a.jsx)(E.a,{path:"/login",children:Object(a.jsx)("div",{children:null===c?Object(a.jsx)(m,{handleSubmit:i}):Object(a.jsx)("div",{children:Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:c.name})," logged-in"," "]})})})}),Object(a.jsx)(E.a,{path:"/",children:null===c?Object(a.jsx)("div",{children:"Please login to view the data"}):Object(a.jsx)(I,{})})]})]})})},_=(n(136),n(67)),A=Object(i.c)(S,Object(i.a)(_.a));s.a.render(Object(a.jsx)(o.a,{store:A,children:Object(a.jsx)(N,{})}),document.getElementById("root"))}},[[138,1,2]]]);
//# sourceMappingURL=main.6899b2df.chunk.js.map